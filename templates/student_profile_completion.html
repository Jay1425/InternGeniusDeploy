{% extends "base.html" %}

{% block title %}Complete Your Profile - InternGenius{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-user-edit me-2"></i>
                        Complete Your Profile
                    </h3>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        Complete your profile to start applying for internships!
                    </div>

                    <form method="POST" action="{{ url_for('complete_student_profile') }}" class="needs-validation" novalidate>
                        {{ csrf_token() }}
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <!-- Personal Information -->
                        <h5 class="mb-3 text-primary">
                            <i class="fas fa-user me-2"></i>Personal Information
                        </h5>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="phone" class="form-label">Phone Number *</label>
                                <input type="tel" class="form-control" id="phone" name="phone" required 
                                       pattern="[0-9]{10}" placeholder="10-digit mobile number">
                                <div class="invalid-feedback">
                                    Please provide a valid 10-digit phone number.
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="date_of_birth" class="form-label">Date of Birth *</label>
                                <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" required>
                                <div class="invalid-feedback">
                                    Please provide your date of birth.
                                </div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="gender" class="form-label">Gender *</label>
                                <select class="form-select" id="gender" name="gender" required>
                                    <option value="">Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                    <option value="Prefer not to say">Prefer not to say</option>
                                </select>
                                <div class="invalid-feedback">
                                    Please select your gender.
                                </div>
                            </div>
                        </div>

                        <!-- Address Information -->
                        <h5 class="mb-3 text-primary">
                            <i class="fas fa-map-marker-alt me-2"></i>Address Information
                        </h5>

                        <div class="mb-3">
                            <label for="address_line1" class="form-label">Address Line 1 *</label>
                            <input type="text" class="form-control" id="address_line1" name="address_line1" required
                                   placeholder="House/Flat No., Building Name">
                            <div class="invalid-feedback">
                                Please provide your address.
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="address_line2" class="form-label">Address Line 2</label>
                            <input type="text" class="form-control" id="address_line2" name="address_line2"
                                   placeholder="Street, Landmark">
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="city" class="form-label">City *</label>
                                <input type="text" class="form-control" id="city" name="city" required>
                                <div class="invalid-feedback">
                                    Please provide your city.
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label for="state" class="form-label">State *</label>
                                <input type="text" class="form-control" id="state" name="state" required>
                                <div class="invalid-feedback">
                                    Please provide your state.
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label for="pincode" class="form-label">Pin Code *</label>
                                <input type="text" class="form-control" id="pincode" name="pincode" required
                                       pattern="[0-9]{6}" placeholder="6-digit pin code">
                                <div class="invalid-feedback">
                                    Please provide a valid 6-digit pin code.
                                </div>
                            </div>
                        </div>

                        <!-- Educational Information -->
                        <h5 class="mb-3 text-primary">
                            <i class="fas fa-graduation-cap me-2"></i>Educational Information
                        </h5>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="university" class="form-label">University/College *</label>
                                <input type="text" class="form-control" id="university" name="university" required>
                                <div class="invalid-feedback">
                                    Please provide your university/college name.
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="degree" class="form-label">Degree *</label>
                                <input type="text" class="form-control" id="degree" name="degree" required
                                       placeholder="e.g., B.Tech, MBA, BCA">
                                <div class="invalid-feedback">
                                    Please provide your degree.
                                </div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="specialization" class="form-label">Specialization</label>
                                <input type="text" class="form-control" id="specialization" name="specialization"
                                       placeholder="e.g., Computer Science, Marketing">
                            </div>
                            <div class="col-md-6">
                                <label for="graduation_year" class="form-label">Expected Graduation Year *</label>
                                <select class="form-select" id="graduation_year" name="graduation_year" required>
                                    <option value="">Select Year</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                    <option value="2027">2027</option>
                                    <option value="2028">2028</option>
                                </select>
                                <div class="invalid-feedback">
                                    Please select your graduation year.
                                </div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="cgpa" class="form-label">CGPA/Percentage</label>
                                <input type="text" class="form-control" id="cgpa" name="cgpa"
                                       placeholder="e.g., 8.5 or 85%">
                            </div>
                        </div>

                        <!-- Skills and Preferences -->
                        <h5 class="mb-3 text-primary">
                            <i class="fas fa-cogs me-2"></i>Skills & Preferences
                        </h5>

                        <div class="mb-3">
                            <label for="technical_skills" class="form-label">Technical Skills</label>
                            <textarea class="form-control" id="technical_skills" name="technical_skills" rows="3"
                                      placeholder="List your technical skills (e.g., Python, Java, HTML/CSS, Data Analysis)"></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="interests" class="form-label">Areas of Interest</label>
                            <textarea class="form-control" id="interests" name="interests" rows="3"
                                      placeholder="Areas you're interested to work in (e.g., Web Development, Machine Learning, Digital Marketing)"></textarea>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="preferred_location" class="form-label">Preferred Location</label>
                                <input type="text" class="form-control" id="preferred_location" name="preferred_location"
                                       placeholder="e.g., Mumbai, Bangalore, Remote">
                            </div>
                            <div class="col-md-6">
                                <label for="expected_stipend" class="form-label">Expected Stipend (â‚¹/month)</label>
                                <input type="number" class="form-control" id="expected_stipend" name="expected_stipend"
                                       placeholder="e.g., 10000">
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <button type="button" class="btn btn-secondary me-md-2" onclick="history.back()">
                                <i class="fas fa-arrow-left me-2"></i>Back
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-check me-2"></i>Complete Profile
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Form validation
(function() {
    'use strict';
    window.addEventListener('load', function() {
        var forms = document.getElementsByClassName('needs-validation');
        var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
                if (form.checkValidity() === false) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
    }, false);
})();

// Auto-format phone number
document.getElementById('phone').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '');
    if (this.value.length > 10) {
        this.value = this.value.slice(0, 10);
    }
});

// Auto-format pincode
document.getElementById('pincode').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '');
    if (this.value.length > 6) {
        this.value = this.value.slice(0, 6);
    }
});
</script>
{% endblock %}
